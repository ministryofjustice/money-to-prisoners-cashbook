{% extends "base.html" %}
{% load i18n moj_utils %}

{% block content %}
  <h1>{% trans "Money sent to prisoners" %}</h1>

  <ul class="SummaryBoxes">
    <li class="SummaryBoxes--unprocessed" id="tour-step1">
      <a href="{% url 'transaction-list' %}">
        <h2>{% trans "New" %}</h2>
        <p>
          {% blocktrans with payments_count="<strong>{0}</strong>"|safewrap:new_transactions %}
          {{ payments_count }} Credits to process
          {% endblocktrans %}
        </p>
      </a>
    </li>

    <li id="tour-step2">
      <a href="{% url 'transaction-history' %}">
        <h2>{% trans "History" %}</h2>
        <p>{%trans "Credits processed by the team" %}</p>
      </a>
    </li>

    <li class="SummaryBoxes--locked">
      <a href="{% url 'transactions-locked' %}">
        <h2>{% trans "In progress" %}</h2>
        <p>
          {% blocktrans with payments_count="<strong>{0}</strong>"|safewrap:locked_transactions %}
          {{ payments_count }} Credits in progress
          {% endblocktrans %}
        </p>
      </a>
    </li>
  </ul>

  <div id="tour-intro"></div>

{% endblock content %}

{% block include_js %}
  <script>
    var tour = {
      id: 'dashboard',
      steps: [
        {
          content: '{% blocktrans %}<p>Welcome to the Digital Payments service. Would you like to take a quick tour that explains how it works?</p>{% endblocktrans %}',
          target: 'tour-intro',
          padding: 10,
          placement: 'bottom',
          xOffset: 'center',
          yOffset: '-50',
          highlight: true,
          dismissTo: 3
        },
        {
          content: '{% blocktrans %}<p>You can see what needs to be credited to prisoners in NOMIS by clicking ‘New payments’.</p><p>You’ll get a batch of payment to credit. No-one else in your team will be able to see the batch you’re working on.</p>{% endblocktrans %}',
          target: 'tour-step1',
          padding: 10,
          placement: 'bottom',
          arrowOffset: 100,
          highlight: true
        },
        {
          content: '{% blocktrans %}<p>You can see all payments you’ve credited to NOMIS in your history.</p>{% endblocktrans %}',
          target: 'tour-step2',
          padding: 10,
          placement: 'bottom',
          xOffset: 'center',
          highlight: true
        },
        {
          content: '{% blocktrans %}<p>You can resume the tour at any time from here.</p>{% endblocktrans %}',
          target: 'tour-resume',
          padding: 10,
          placement: 'bottom',
          xOffset: -250,
          arrowOffset: 265,
          fadeout: true
        }
      ]
    };
  </script>

  {{ block.super }}
{% endblock %}
