{% extends "base.html" %}
{% load currency i18n %}

{% block content %}
  <form method="post" action="">
  {% csrf_token %}
  <div class="totals">
    <p>Control total: <strong>&pound;{{ total|currency }}</strong></p>
    <p>Total payments credited: &pound;60</p>
  </div>

  <input type="submit" value="I've credited ticked payments in NOMIS" class="button">
  <button class="button button-secondary" name="discard" value="1">Discard</button>

  {% if object_list %}
  {{ form.errors }}

  <div class="batch">
    <table>
      <thead>
        <tr>
          <th>Prisoner no</th>
          <th>Prisoner name</th>
          <th>Amount</th>
          <th>Sender</th>
          <th>Credited?</th>
        </tr>
      </thead>

      <tfoot>
        <tr>
          <th colspan="5" style="padding:0"></th>
        </tr>
      </tfoot>

      <tbody>
      {% for transaction_pk, transaction in object_list %}
        <tr {% if forloop.counter|divisibleby:2 %}{% else %}class="odd"{% endif %}>
          <td>{{ transaction.prisoner_number }}</td>
          <td>??? ???</td>
          <td class="numeric">&pound;{{ transaction.amount|currency }}</td>
          <td>{{ transaction.sender }}</td>
          <td class="check"><input type="checkbox" name="{{ form.transactions.html_name }}" value="{{ transaction_pk }}" {% if transaction.credited %}checked{% endif %}></td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
    <p class="select-all"><label for="select-all">Select all<input type="checkbox" id="select-all"></label></p>
  </div>
  {% else %}
    <p>{% trans "No transactions found" %}</p>
  {% endif %}

  <input type="submit" value="I've credited ticked payments in NOMIS" class="button">
  <button class="button button-secondary">Discard</button>
  </form>

{% endblock content %}
