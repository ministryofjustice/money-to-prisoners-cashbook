{% extends 'disbursements/base.html' %}
{% load i18n %}
{% load mtp_common %}
{% load disbursements %}
{% load currency %}

{% block page_title %}{% trans 'Check details before sending' %} – {{ block.super }}{% endblock %}
{% block body_classes %}{{ block.super }} mtp-create-disbursement{% endblock %}

{% block inner_content %}
  {{ block.super }}

  <header>
    <h1 class="heading-xlarge mtp-heading--compact">
      {% trans 'Check payment details' %}
    </h1>
  </header>

  {% if errors %}
  <div class="error-summary" aria-labelledby="error-summary-heading" tabindex="-1" role="alert">
    <h2 class="heading-medium error-summary-heading" id="error-summary-heading">
      {% trans 'There was a problem' %}
    </h2>
    <ul class="error-summary-list">
      {% for error in errors %}
        <li class="non-field-error">{{ error }}<span class="visually-hidden">.</span></li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  <div>
    <div class="mtp-check">
      <table>
        <tr>
          <th><h2 class="heading-large">{% trans 'Send' %}</h2></th>
          <td>{% trans 'Send by' %}:</td>
          <td>{{ sending_method|sendingmethod }}</td>
          <td class="mtp-confirm-change">
            <a href="{% url 'disbursements:sending_method' %}" class="print-hidden">
              {% trans 'Change' %}
              <span class="visually-hidden">{% trans 'Sending method' %}</span>
            </a>
          </td>
        </tr>
        <tr>
          <td></td>
          <td>{% trans 'Amount' %}:</td>
          <td>£{{ amount|currency }}</td>
          <td class="mtp-confirm-change">
            <a href="{% url 'disbursements:amount' %}" class="print-hidden">
              {% trans 'Change' %}
              <span class="visually-hidden">{% trans 'Amount' %}</span>
            </a>
          </td>
        </tr>
        <tr class="mtp-section-header">
          <th><h2 class="heading-large">{% trans 'To' %}</h2></th>
          <th>{% trans 'Name' %}:</th>
          <td>{{ recipient_first_name}} {{recipient_last_name}}</td>
          <td class="mtp-confirm-change">
            <a href="{% url 'disbursements:recipient_contact' %}" class="print-hidden">
              {% trans 'Change' %}
              <span class="visually-hidden">{% trans 'Recipient details' %}</span>
            </a>
          </td>
        </tr>
        <tr>
          <td></td>
          <th>{% trans 'Address' %}:</th>
          <td>{{ address_line1 }}</td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td>{{ address_line2 }}</td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <th></th>
          <td>{{ city }}</td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <th>{% trans 'Postcode' %}:</th>
          <td>{{ postcode }}</td>
          <td></td>
        </tr>
        {% if email %}
          <tr>
            <td></td>
            <th>{% trans 'Email' %}:</th>
            <td>{{ email }}</td>
            <td></td>
          </tr>
        {% endif %}
        {% if sending_method == 'bank_transfer' %}
          <tr>
            <td></td>
            <th>{% trans 'Sort code' %}:</th>
            <td>{{ sort_code }}</td>
            <td class="mtp-confirm-change">
              <a href="{% url 'disbursements:recipient_bank_account' %}" class="print-hidden">
                {% trans 'Change' %}
                <span class="visually-hidden">{% trans 'Recipient bank account details' %}</span>
              </a>
            </td>
          </tr>
          <tr>
            <td></td>
            <th>{% trans 'Account number' %}:</th>
            <td>{{ account_number }}</td>
            <td></td>
          </tr>
        {% endif %}
        <tr class="mtp-section-header">
          <th><h2 class="heading-large">{% trans 'From' %}</h2></th>
          <th>{% trans 'Name' %}:</th>
          <td>{{ prisoner_name }}</td>
          <td class="mtp-confirm-change">
            <a href="{% url 'disbursements:prisoner' %}" class="print-hidden">
              {% trans 'Change' %}
              <span class="visually-hidden">{% trans 'Prisoner details' %}</span>
            </a>
          </td>
        </tr>
        <tr>
          <td></td>
          <th>{% trans 'Prisoner number' %}:</th>
          <td>{{ prisoner_number }}</td>
          <td></td>
          <td></td>
        </tr>
          <tr>
          <td colspan="2"></td>
        </tr>
      </table>
    </div>
    <br/>
    <p>
      <strong>{% trans 'Do the details above match those on the paper form?' %}</strong>
    </p>

    <div>
      <a id="id_next_btn" class="button mtp-next-button" href="{{ view.get_success_url }}">{% trans 'Next' %}</a>
    </div>
  </div>
{% endblock %}
