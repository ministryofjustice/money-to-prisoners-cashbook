{% extends 'disbursements/base.html' %}
{% load i18n %}
{% load mtp_common %}
{% load disbursements %}
{% load currency %}

{% block page_title %}{% trans 'Check details before sending' %} – {{ block.super }}{% endblock %}
{% block body_classes %}{{ block.super }} mtp-create-disbursement{% endblock %}

{% block inner_content %}
  {{ block.super }}

  <header>
    <h1 class="heading-xlarge mtp-heading--compact">
      {% trans 'Check payment details' %}
    </h1>
    <p>Check if details below match the details on the paper form filled in by the prisoner. If they do not match, change details to correctly match the paper form.</p>
  </header>

  {% if errors %}
    <div class="error-summary" aria-labelledby="error-summary-heading" tabindex="-1" role="alert">
      <h2 class="heading-small error-summary-heading" id="error-summary-heading">
        {% trans 'There was a problem' %}
      </h2>
      <ul class="error-summary-list">
        {% for error in errors %}
          <li class="non-field-error">{{ error }}<span class="visually-hidden">.</span></li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}

  <table class="mtp-confirm-table">
    <tr class="mtp-confirm-table__section">
      <th rowspan="2"><h2 class="heading-small">{% trans 'Send' %}</h2></th>
      <th>{% trans 'Send by' %}:</th>
      <td>{{ sending_method|sendingmethod }}</td>
      <td>
        <a href="{% url 'disbursements:sending_method' %}" class="print-hidden">
          {% trans 'Change' %}
          <span class="visually-hidden">{% trans 'Sending method' %}</span>
        </a>
      </td>
    </tr>
    <tr>
      <th>{% trans 'Amount' %}:</th>
      <td>£{{ amount|currency }}</td>
      <td>
        <a href="{% url 'disbursements:amount' %}" class="print-hidden">
          {% trans 'Change' %}
          <span class="visually-hidden">{% trans 'Amount' %}</span>
        </a>
      </td>
    </tr>

    <tr class="mtp-confirm-table__section">
      <th><h2 class="heading-small">{% trans 'To' %}</h2></th>
      <th>{% trans 'Name' %}:</th>
      <td>{{ recipient_first_name}} {{recipient_last_name}}</td>
      <td>
        <a href="{% url 'disbursements:recipient_contact' %}" class="print-hidden">
          {% trans 'Change' %}
          <span class="visually-hidden">{% trans 'Recipient details' %}</span>
        </a>
      </td>
    </tr>
    <tr>
      <td></td>
      <th>{% trans 'Address' %}:</th>
      <td>
        {{ address_line1 }}<br>
        {% if address_line2 %}{{ address_line2 }}<br>{% endif %}
        {{ city }}
      </td>
      <td></td>
    </tr>
    <tr>
      <td></td>
      <th>{% trans 'Postcode' %}:</th>
      <td>{{ postcode }}</td>
      <td></td>
    </tr>
    {% if email %}
      <tr>
      <td></td>
        <th>{% trans 'Email' %}:</th>
        <td>{{ email }}</td>
        <td></td>
      </tr>
    {% endif %}
    {% if sending_method == 'bank_transfer' %}
      <tr>
        <td></td>
        <th>{% trans 'Sort code' %}:</th>
        <td>{{ sort_code }}</td>
        <td>
          <a href="{% url 'disbursements:recipient_bank_account' %}" class="print-hidden">
            {% trans 'Change' %}
            <span class="visually-hidden">{% trans 'Recipient bank account details' %}</span>
          </a>
        </td>
      </tr>
      <tr>
        <td></td>
        <th>{% trans 'Account number' %}:</th>
        <td>{{ account_number }}</td>
        <td></td>
      </tr>
    {% endif %}

    <tr class="mtp-confirm-table__section">
      <th rowspan="2"><h2 class="heading-small">{% trans 'From' %}</h2></th>
      <th>{% trans 'Name' %}:</th>
      <td>{{ prisoner_name }}</td>
      <td>
        <a href="{% url 'disbursements:prisoner' %}" class="print-hidden">
          {% trans 'Change' %}
          <span class="visually-hidden">{% trans 'Prisoner details' %}</span>
        </a>
      </td>
    </tr>
    <tr>
      <th>{% trans 'Prisoner number' %}:</th>
      <td>{{ prisoner_number }}</td>
      <td></td>
    </tr>
  </table>

  <a class="button mtp-next-button" href="{{ view.get_success_url }}">{% trans 'Submit for review' %}</a>
{% endblock %}
