{% extends 'disbursements/base.html' %}
{% load i18n %}
{% load static %}
{% load mtp_common %}
{% load disbursements %}
{% load currency %}

{% block page_title %}{% trans 'Check details before sending' %} – {{ block.super }}{% endblock %}
{% block body_classes %}{{ block.super }} mtp-create-disbursement{% endblock %}

{% block inner_content %}
  {{ block.super }}

  <header>
    <h1 class="heading-xlarge mtp-heading--compact">
      {% trans 'Check payment details' %}
    </h1>
    <p>
      {% trans 'Check if details below match the details on the paper form filled in by the prisoner.' %}
      <br>
      {% trans 'If they do not match, change details to correctly match the paper form.' %}
    </p>
  </header>

  <table class="mtp-confirm-table">
    <caption class="visually-hidden">{% trans 'Disbursement details' %}</caption>
    <tbody class="mtp-confirm-table__details">
      <tr class="mtp-confirm-table__section">
        <th rowspan="2"><h2 class="heading-small">{% trans 'Send' %}</h2></th>
        <th>{% trans 'Send by' %}:</th>
        <td>{{ method|sendingmethod }}</td>
        <td>
          <a href="{% url 'disbursements:sending_method' %}" class="print-hidden">
            {% trans 'Change' %}
            <span class="visually-hidden">{% trans 'Sending method' %}</span>
          </a>
        </td>
      </tr>
      <tr>
        <th>{% trans 'Amount' %}:</th>
        <td>£{{ amount|currency }}</td>
        <td>
          <a href="{% url 'disbursements:amount' %}" class="print-hidden">
            {% trans 'Change' %}
            <span class="visually-hidden">{% trans 'Amount' %}</span>
          </a>
        </td>
      </tr>

      <tr class="mtp-confirm-table__section">
        <th><h2 class="heading-small">{% trans 'To' %}</h2></th>
        <th>{% trans 'Name' %}:</th>
        <td>{{ recipient_first_name}} {{recipient_last_name}}</td>
        <td>
          <a href="{% url 'disbursements:recipient_contact' %}" class="print-hidden">
            {% trans 'Change' %}
            <span class="visually-hidden">{% trans 'Recipient details' %}</span>
          </a>
        </td>
      </tr>
      <tr>
        <td></td>
        <th>{% trans 'Address' %}:</th>
        <td>
          <address>
            {{ address_line1 }}<br>
            {% if address_line2 %}{{ address_line2 }}<br>{% endif %}
            {{ city }}
          </address>
        </td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <th>{% trans 'Postcode' %}:</th>
        <td>{{ postcode }}</td>
        <td></td>
      </tr>
      {% if recipient_email %}
        <tr>
        <td></td>
          <th>{% trans 'Email' %}:</th>
          <td>{{ recipient_email }}</td>
          <td></td>
        </tr>
      {% endif %}
      {% if method == 'bank_transfer' %}
        <tr>
          <td></td>
          <th>{% trans 'Sort code' %}:</th>
          <td>{{ sort_code|format_sortcode }}</td>
          <td>
            <a href="{% url 'disbursements:recipient_bank_account' %}" class="print-hidden">
              {% trans 'Change' %}
              <span class="visually-hidden">{% trans 'Recipient bank account details' %}</span>
            </a>
          </td>
        </tr>
        <tr>
          <td></td>
          <th>{% trans 'Account number' %}:</th>
          <td>{{ account_number }}</td>
          <td></td>
        </tr>
      {% endif %}

      <tr class="mtp-confirm-table__section">
        <th rowspan="2"><h2 class="heading-small">{% trans 'From' %}</h2></th>
        <th>{% trans 'Name' %}:</th>
        <td>{{ prisoner_name }}</td>
        <td>
          <a href="{% url 'disbursements:prisoner' %}" class="print-hidden">
            {% trans 'Change' %}
            <span class="visually-hidden">{% trans 'Prisoner details' %}</span>
          </a>
        </td>
      </tr>
      <tr>
        <th>{% trans 'Prisoner number' %}:</th>
        <td>{{ prisoner_number }}</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <br>

  <p><strong>{% trans 'Do the details above match those on the paper form?' %}</strong></p>

  <div class="form-group">
    <div class="multiple-choice">
      {% random_string as choice_id %}
      <input id="js-choice-{{ choice_id }}" class="mtp-radio-reveal" type="radio" name="form-check" value="{% trans 'Yes' %}" data-reveal=".js-choice-yes">
      <label for="js-choice-{{ choice_id }}">{% trans 'Yes' %}</label>
    </div>
    <div class="panel panel-border-narrow mtp-button-panel js-hidden js-choice-yes">
      <div>{% trans 'Sign the bottom of the paper form under ‘Staff’.' %}</div>
      <div>
        <img class="mtp-filled-form-sample" src="{% static 'disbursements/disbursement-by-bank-transfer-or-cheque-V1-signed-1.jpg' %}" srcset="{% static 'disbursements/disbursement-by-bank-transfer-or-cheque-V1-signed-1@2x.jpg' %} 2x" alt="{% trans 'Sign the bottom of the paper form under ‘Staff’.' %}" />
      </div>
      <div>
        <a class="button mtp-next-button js-choice-yes" href="{{ view.get_success_url }}">{% trans 'Next' %}</a>
      </div>
    </div>

    <div class="multiple-choice">
      {% random_string as choice_id %}
      <input id="js-choice-{{ choice_id }}" class="mtp-radio-reveal" type="radio" name="form-check" value="{% trans 'No' %}" data-reveal=".js-choice-no">
      <label for="js-choice-{{ choice_id }}">{% trans 'No' %}</label>
    </div>
    <div class="panel panel-border-narrow js-hidden js-choice-no">
      {% blocktrans trimmed with button_name=_('Change')|wrapwithtag:'strong' %}
        Use ‘{{ button_name }}’ buttons above to make sure the details match those on the paper form.
      {% endblocktrans %}
    </div>
  </div>
{% endblock %}
